export const title = 'React Server Componentsï¼ˆRSCï¼‰'
export const description = 'Learn about React Server Components, how they work, and how to use them.'
export const publishedAt = '2025-04-12'

React Server Components æ˜¯ React å¼•å…¥çš„æœ€æ–°æ¶æ„å‡çº§ä¹‹ä¸€ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ„å»ºæ›´åŠ é«˜æ•ˆã€ç°ä»£åŒ– Web åº”ç”¨çš„æ–°æ–¹å¼ã€‚

## ä»€ä¹ˆæ˜¯ React Server Components?

React Server Componentsï¼ˆç®€ç§° RSCï¼‰æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ React ç»„ä»¶ã€‚å®ƒä»¬ä¸ä¼šè¢«æ‰“åŒ…è¿›å®¢æˆ·ç«¯ JS bundleï¼Œå› æ­¤å¯ä»¥å¤§å¤§å‡å°å‰ç«¯èµ„æºä½“ç§¯ï¼Œæé«˜é¦–å±åŠ è½½æ€§èƒ½ã€‚

### âœ… æ ¸å¿ƒç‰¹æ€§ï¼š

- **è¿è¡Œä½ç½®**ï¼šåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ
- **å¯è®¿é—®èµ„æº**ï¼šå¯ä»¥è®¿é—®æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€åç«¯ API ç­‰æœåŠ¡ç«¯èƒ½åŠ›
- **ä¸åŒ…å«åœ¨ JS bundle ä¸­**ï¼šä¸ä¼šè¢«å‘é€åˆ°æµè§ˆå™¨ï¼Œå‡å°å®¢æˆ·ç«¯ä½“ç§¯
- **ä¸å¯äº¤äº’**ï¼šä¸èƒ½ä½¿ç”¨ `useState`ã€`useEffect` ç­‰ React Hooks
- **å¯ä»¥åµŒå¥— Client Components**ï¼šå¯åœ¨å…¶ä¸­å¼•ç”¨ Client Components

> ğŸ’¡ éå¸¸é€‚åˆå±•ç¤ºæ•°æ®ã€é™æ€å†…å®¹ã€æ— éœ€äº¤äº’çš„ UI ç‰‡æ®µï¼Œä¾‹å¦‚æ–‡ç« è¯¦æƒ…é¡µã€åˆ—è¡¨é¡µã€SEO é¡µé¢ç­‰

## React Server Components æ˜¯å¦‚ä½•å·¥ä½œçš„?

React Server Components å¹¶ä¸æ˜¯ SSRï¼ˆServer-Side Renderingï¼‰æˆ– SSGï¼ˆStatic Site Generationï¼‰çš„æ›¿ä»£å“ï¼Œè€Œæ˜¯ä¸å®ƒä»¬é…åˆä½¿ç”¨çš„ä¸€ç§æ–°çš„ç»„ä»¶è¿è¡Œæ–¹å¼

ä»¥ä¸‹æ˜¯ä¸€å¼ å›¾ç¤ºï¼Œå¸®åŠ©ä½ ç†è§£ Server Component åˆ° Client çš„æ•°æ®æµï¼š

![React Server Components Workflow](/with-react-server-components.avif)

### ğŸ“¦ å·¥ä½œæœºåˆ¶ç®€è¿°ï¼š

1. **æœåŠ¡å™¨æ¸²æŸ“ Server Component**ï¼Œç”Ÿæˆä¸­é—´å±‚ JSON æ•°æ®
2. **å®¢æˆ·ç«¯ React æ¸²æŸ“å™¨æ¥æ”¶æ•°æ®**ï¼Œå°†å…¶ç»„åˆä¸ºå®Œæ•´ UI
3. **Client Component åµŒå¥—åœ¨ Server Component ä¸­**ï¼Œå®ç°äº¤äº’èƒ½åŠ›

## å¦‚ä½•ä½¿ç”¨ React Server Components?

RSC é€šå¸¸é…åˆæ¡†æ¶ä½¿ç”¨ï¼Œä¾‹å¦‚ [Next.js 13+](https://nextjs.org/docs/app/building-your-application/rendering/server-components) é»˜è®¤å¯ç”¨ RSC æ”¯æŒ

### ğŸ“ é¡¹ç›®ç»“æ„ç¤ºæ„

```
app/
  posts/
    page.tsx         â† Server Component
components/
  post-card.tsx       â† Client Component
lib/
  db.ts              â† æ•°æ®æºè®¿é—®
```

### âœ… åˆ›å»ºä¸€ä¸ª Server Component

```tsx
/* [!code filename:app/posts/page.tsx] */
import { getPosts } from '@/lib/db'
import { PostCard } from '@/components/post-card'

export default async function PostsPage() {
  const posts = await getPosts()

  return (
    <div className="space-y-4">
      {posts.map((post) => (
        <PostCard key={post.id} post={post} />
      ))}
    </div>
  )
}
```

### ğŸ“¦ åˆ›å»ºä¸€ä¸ª Client Component

```tsx
/* [!code filename:components/post-card.tsx] */
'use client'

import * as React from 'react'

type Props = {
  post: {
    id: number
    title: string
    content: string
  }
}

export function PostCard({ post }: Props) {
  const [liked, setLiked] = React.useState(false)

  return (
    <div className="border p-4 rounded-md shadow">
      <h2 className="font-bold text-xl">{post.title}</h2>
      <p className="text-gray-700">{post.content}</p>
      <button
        onClick={() => setLiked(!liked)}
        className="mt-2 text-sm text-blue-500"
      >
        {liked ? 'ğŸ’™ Liked' : 'ğŸ¤ Like'}
      </button>
    </div>
  )
}
```

### ğŸš¨ æ³¨æ„äº‹é¡¹

| ç‰¹æ€§                 | Server Component | Client Component |
|----------------------|------------------|------------------|
| æ‰§è¡Œä½ç½®             | æœåŠ¡å™¨           | æµè§ˆå™¨           |
| æ˜¯å¦æ‰“åŒ…åˆ°å®¢æˆ·ç«¯     | âŒ               | âœ…               |
| å¯è®¿é—®æœåŠ¡å™¨èµ„æº     | âœ…               | âŒ               |
| ä½¿ç”¨çŠ¶æ€/ç”Ÿå‘½å‘¨æœŸ     | âŒ               | âœ…               |
| ä½¿ç”¨åœºæ™¯             | æ•°æ®æ¸²æŸ“ã€é™æ€å†…å®¹ | è¡¨å•ã€åŠ¨ç”»ã€äº¤äº’é€»è¾‘ |

### ğŸ“Œ ä½¿ç”¨å»ºè®®

- âœ… å°†é¡µé¢å¸ƒå±€ã€å¤§æ®µæ•°æ®å±•ç¤ºã€SEO å†…å®¹å†™åœ¨ Server Components ä¸­
- âœ… å°†è¾“å…¥è¡¨å•ã€æŒ‰é’®äº¤äº’ã€Tab åˆ‡æ¢ç­‰å†™åœ¨ Client Components ä¸­
- âŒ é¿å…å°†æ‰€æœ‰ç»„ä»¶æ ‡è®°ä¸º `'use client'`ï¼Œå¦åˆ™ä¼šå¤±å» RSC å¸¦æ¥çš„ä¼˜åŒ–
- âœ… åœ¨ Server Components ä¸­ä¼˜å…ˆå¤„ç†æ•°æ®é€»è¾‘ï¼Œæå‡ä»£ç å¯è¯»æ€§

### ğŸ”š æ€»ç»“

React Server Components æ˜¯ React æ„å»ºç°ä»£ Web åº”ç”¨çš„å…³é”®è¿›åŒ–ä¹‹ä¸€ï¼Œå®ƒè®©æˆ‘ä»¬å¯ä»¥æ›´åˆç†åœ°æ‹†åˆ†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„é€»è¾‘ã€‚

é€šè¿‡ä½¿ç”¨ RSCï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

- æ˜¾è‘—å‡å°‘å®¢æˆ·ç«¯ JS ä½“ç§¯
- æé«˜åˆå§‹åŠ è½½æ€§èƒ½
- ä¿æŒç»„ä»¶çº§åˆ«çš„ç»„ç»‡å’Œå¤ç”¨
- åˆ©ç”¨æœåŠ¡ç«¯èƒ½åŠ›è€Œæ— éœ€é¢å¤–çš„ API å±‚

æœªæ¥ï¼Œéšç€ Next.js å’Œå…¶ä»–æ¡†æ¶çš„æ”¯æŒï¼ŒRSC å°†æˆä¸ºå¤§å‹ Web åº”ç”¨çš„åŸºç¡€æ¶æ„ä¹‹ä¸€ã€‚